<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="userManage">
	<select id="findRoles" parameterType="java.lang.String" resultType="java.lang.String">
		select role from sys_users u, sys_roles r,sys_users_roles ur 
		where u.username=#{userName} and u.id=ur.user_id and r.id=ur.role_id
	</select>
	<select id="findPermissions" parameterType="java.lang.String" resultType="java.lang.String">
		select permission from sys_users u, sys_roles r, sys_permissions p, sys_users_roles ur, sys_roles_permissions rp 
		where u.username=#{userName} and u.id=ur.user_id and r.id=ur.role_id and r.id=rp.role_id and p.id=rp.permission_id
	</select>
	<select id="findByUserName" parameterType="java.lang.String" resultType="SysUserVO">
		select id, username, password, salt, locked from sys_users where username=#{userName}
	</select>
	
</mapper>